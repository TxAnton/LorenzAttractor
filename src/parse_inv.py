import attractor
from attractor import Attractor
import matplotlib.pyplot as plt
import numpy as np
from threading import Thread, Lock
import time
import json
import copy



methods = Attractor.methods

# s = {"('EUL1', 1)": [-20.999978365291824, 4.223627160613191e-06, 0.00043892622374454884, -21.00000031158106], "('EUL1', 2)": [2.1024999901149104, 1.728660045470213e-09, -1.7960649654137428e-07, 2.102499999095226], "('EUL1', 3)": [1.784157995254503, 0.11131241594421473, -11.528596839747868, 2.360587260812054], "('EUL1', 4)": [0.4999999987468464, 2.525572443310224e-10, -2.624567090807205e-08, 0.5000000000591287], "('EUL1', 5)": [112.39999535215067, 8.940833433633235e-07, -9.291568008397273e-05, 112.39999999793001], "('MIDP2', 1)": [-21.000000000014737, 2.942411065936392e-12, -3.053178672128565e-10, -20.999999999999467], "('MIDP2', 2)": [2.1025000000000413, 4.3448787279132926e-14, -3.57825277998172e-12, 2.1025000000002216], "('MIDP2', 3)": [1.7841580960640644, 0.11131239155187896, -11.528594299780138, 2.360587234623356], "('MIDP2', 4)": [0.4999999999999841, 5.353062098428974e-15, -1.5024703357171836e-13, 0.49999999999999145], "('MIDP2', 5)": [112.39999999999938, 9.309487505846372e-13, 2.929653182326727e-11, 112.3999999999979], "('RK4', 1)": [-21.00000000000052, 2.0904742404287742e-13, -1.985678568836432e-11, -20.99999999999952], "('RK4', 2)": [2.1025000000000413, 4.3745525795669287e-14, -3.648586767389185e-12, 2.1025000000002247], "('RK4', 3)": [1.7841580960640504, 0.11131239155188279, -11.528594299780531, 2.3605872346233605], "('RK4', 4)": [0.4999999999999841, 5.330395405198325e-15, -1.4645586621769874e-13, 0.49999999999999123], "('RK4', 5)": [112.39999999999873, 8.977882754189427e-13, 1.557057704601589e-11, 112.39999999999804], "('AB4', 1)": [-21.00000000000052, 2.0755681294601098e-13, -1.9615755174141162e-11, -20.999999999999535], "('AB4', 2)": [2.1025000000000413, 4.3745525795669287e-14, -3.648586767389185e-12, 2.1025000000002247], "('AB4', 3)": [1.7841580960640504, 0.11131239155188279, -11.528594299780531, 2.3605872346233605], "('AB4', 4)": [0.4999999999999841, 5.330389697477995e-15, -1.4645586621769874e-13, 0.49999999999999123], "('AB4', 5)": [112.39999999999873, 9.003054943148962e-13, 1.524973775919638e-11, 112.39999999999806], "('AM4', 1)": [-21.00000000000052, 2.0785304321719623e-13, -1.9696165520400303e-11, -20.99999999999953], "('AM4', 2)": [2.1025000000000413, 4.3745525795669287e-14, -3.648586767389185e-12, 2.1025000000002247], "('AM4', 3)": [1.7841580960640504, 0.11131239155188279, -11.528594299780531, 2.3605872346233605], "('AM4', 4)": [0.4999999999999841, 5.330363372510478e-15, -1.4645586621769874e-13, 0.49999999999999123], "('AM4', 5)": [112.39999999999873, 8.977889599893469e-13, 1.557057704601589e-11, 112.39999999999804], "('ABM5', 1)": [-21.000000000000515, 2.079475707704951e-13, -1.9696005286303425e-11, -20.999999999999527], "('ABM5', 2)": [2.102500000000041, 4.374652295564811e-14, -3.638535474106792e-12, 2.1025000000002243], "('ABM5', 3)": [1.7841580960640504, 0.11131239155188279, -11.528594299780531, 2.3605872346233605], "('ABM5', 4)": [0.4999999999999841, 5.330363372510478e-15, -1.4645586621769874e-13, 0.49999999999999123], "('ABM5', 5)": [112.39999999999871, 8.977156080976748e-13, 1.491478302812907e-11, 112.39999999999806]}
# s = {"('EUL1', 1)": [-20.99783657614906, 0.00042245545295634595, 0.043893572811398114, -21.000031035321765], "('EUL1', 2)": [2.102499011564858, 1.7291086486007592e-07, -1.796175224234876e-05, 2.1024999095626606], "('EUL1', 3)": [1.7842010344684969, 0.11132652468535849, -11.527754813290036, 2.360531136358932], "('EUL1', 4)": [0.4999998746936982, 2.5260427108444258e-08, -2.6245361487303663e-06, 0.5000000059073829], "('EUL1', 5)": [112.39953524964533, 8.942789188972226e-05, -0.009291761093627064, 112.39999979124124], "('MIDP2', 1)": [-21.000000144024476, 2.7582655501499636e-08, -2.865899847223064e-06, -21.00000000074382], "('MIDP2', 2)": [2.1025000000105445, 2.5135227930011065e-12, 2.611396380461127e-10, 2.1024999999974887], "('MIDP2', 3)": [1.7842111146321304, 0.11132408490795923, -11.527500810038298, 2.3605285176299944], "('MIDP2', 4)": [0.4999999999995874, 6.883282874676326e-14, -7.1470022767797e-12, 0.49999999999994477], "('MIDP2', 5)": [112.40000000633883, 1.2019327446683545e-09, 1.2488263221438016e-07, 112.40000000009535], "('RK4', 1)": [-20.999999999999844, 2.095937235346319e-14, -1.1983986486325192e-12, -20.999999999999783], "('RK4', 2)": [2.1025000000000063, 3.203913448601721e-15, 3.234987758947289e-13, 2.10249999999999], "('RK4', 3)": [1.7842111144880735, 0.11132408495044677, -11.527500814448825, 2.360528517706443], "('RK4', 4)": [0.4999999999999991, 9.278263154673656e-16, 3.9303615547204284e-14, 0.4999999999999971], "('RK4', 5)": [112.40000000000036, 7.553844084754701e-14, 5.690755110691073e-12, 112.40000000000006], "('AB4', 1)": [-20.99999999999985, 2.139836030559994e-14, -1.3532643581836433e-12, -20.99999999999979], "('AB4', 2)": [2.1025000000000063, 3.203913448601721e-15, 3.234987758947289e-13, 2.10249999999999], "('AB4', 3)": [1.784211114488074, 0.11132408495044673, -11.527500814448825, 2.360528517706443], "('AB4', 4)": [0.49999999999999917, 9.284691615499599e-16, 3.936469960757356e-14, 0.4999999999999972], "('AB4', 5)": [112.40000000000036, 7.561954219928461e-14, 5.690755110691073e-12, 112.40000000000006], "('AM4', 1)": [-20.999999999999833, 1.9945089646836385e-14, -9.954358593162615e-13, -20.99999999999979], "('AM4', 2)": [2.1025000000000063, 3.203913448601721e-15, 3.234987758947289e-13, 2.10249999999999], "('AM4', 3)": [1.7842111144880735, 0.11132408495044677, -11.527500814448825, 2.360528517706443], "('AM4', 4)": [0.49999999999999906, 9.135991939453786e-16, 3.2995486560324294e-14, 0.49999999999999734], "('AM4', 5)": [112.40000000000036, 7.553844084754701e-14, 5.690755110691073e-12, 112.40000000000006], "('ABM5', 1)": [-20.999999999999833, 1.9927389279614424e-14, -9.954358593162615e-13, -20.99999999999979], "('ABM5', 2)": [2.1025000000000063, 3.1143287594276894e-15, 3.172329373852388e-13, 2.10249999999999], "('ABM5', 3)": [1.7842111144880735, 0.11132408495044677, -11.527500814448825, 2.360528517706443], "('ABM5', 4)": [0.4999999999999991, 9.278408270201495e-16, 3.9303615547204284e-14, 0.4999999999999971], "('ABM5', 5)": [112.40000000000036, 7.553844084754701e-14, 5.690755110691073e-12, 112.40000000000006]}
s = {"('EUL1', 1)": [947.9187501198074, 819.041852592324, 7882.303158159811, -2992.8387138021894], "('EUL1', 2)": [2.1024314767054655, 1.5258902510073404e-05, -0.0001583444076218654, 2.102510640992056], "('EUL1', 3)": [None, None, None, None], "('EUL1', 4)": [0.4999832843418278, 3.8255335748547715e-06, -3.9741319818901394e-05, 0.5000031530146712], "('EUL1', 5)": [112.2966899494538, 0.07011800396686643, -0.6670610632140279, 112.63018712800766], "('MIDP2', 1)": [-21.68956828329381, 0.553042712841152, -5.399771355751329, -18.989952593985922], "('MIDP2', 2)": [2.1025000011691897, 2.955787816620229e-10, -2.7644803330357156e-09, 2.102500002551291], "('MIDP2', 3)": [None, None, None, None], "('MIDP2', 4)": [0.4999999999887782, 5.576057873350219e-11, 5.751592760319731e-10, 0.49999999970122744], "('MIDP2', 5)": [112.39999953001688, 5.975895278213956e-06, -5.293049307189553e-05, 112.40002599261689], "('RK4', 1)": [-20.999999936363, 1.65198218959404e-07, 8.718282280282016e-07, -21.00000037223352], "('RK4', 2)": [2.102499999999982, 3.919107469063491e-15, -3.5362501453179996e-14, 2.102499999999999], "('RK4', 3)": [None, None, None, None], "('RK4', 4)": [0.49999999999999933, 7.320849639586349e-16, -1.029337071330874e-15, 0.4999999999999997], "('RK4', 5)": [112.40000000000126, 9.930949142012445e-13, 8.6495824149158e-12, 112.39999999999691], "('AB4', 1)": [-20.999998985741566, 2.0933229194278425e-05, -3.002819659254385e-05, -20.999983973144673], "('AB4', 2)": [2.102499999999952, 4.175230663304071e-15, -4.217545263520253e-14, 2.1024999999999725], "('AB4', 3)": [None, None, None, None], "('AB4', 4)": [0.4999999999999992, 7.313009597379853e-16, -1.1859830340681256e-15, 0.4999999999999998], "('AB4', 5)": [112.39999999995975, 4.386140315728757e-11, -4.114653880431092e-10, 112.40000000016548], "('AM4', 1)": [-21.000000170407848, 1.4991223434071914e-06, 1.026801727726542e-06, -21.000000683757378], "('AM4', 2)": [2.102499999999986, 3.771853928735646e-15, -3.503724328114158e-14, 2.1025000000000027], "('AM4', 3)": [None, None, None, None], "('AM4', 4)": [0.49999999999999933, 7.248062086709825e-16, -3.4638086774128204e-16, 0.4999999999999995], "('AM4', 5)": [112.4000000000036, 3.366798110120154e-12, 3.1989825043881414e-11, 112.39999999998763], "('ABM5', 1)": [-20.99999998074616, 9.699783714366024e-08, 3.7335386910250125e-07, -21.000000167404426], "('ABM5', 2)": [2.1024999999999827, 3.893312269538177e-15, -3.6390179744515666e-14, 2.1025000000000005], "('ABM5', 3)": [None, None, None, None], "('ABM5', 4)": [0.49999999999999933, 7.284946187786015e-16, -1.1859830340681256e-15, 0.4999999999999998], "('ABM5', 5)": [112.40000000000073, 5.670130798172208e-13, 4.078104183139979e-12, 112.39999999999867]}
# i:str
# i.strip('()').split(',')[0].strip("'")
d = {(i.strip('()').split(',')[0].strip("'"),int(i.strip('()').split(',')[1].strip(" "))):s[i] for i in s}

print(methods)
print([i for i in range(1,6)])
print('M D K C')

mn = {m:ix for ix,m in enumerate(methods)}


# M D K C

# print(d)

arr = np.empty([5,len(methods)])

for tp in d:
    i = tp[1]-1 # inv
    j = mn[tp[0]] # method
    print(i,j)
    arr[i,j] = d[tp][0]

for i in arr:
    print(list(i))
print(arr)
